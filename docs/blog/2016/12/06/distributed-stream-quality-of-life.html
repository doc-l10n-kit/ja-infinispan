<!DOCTYPE html>
<html>

<head>
  <title>Distributed Stream Quality of Life Improvements</title>
  <!-- <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/github-dark.min.css">
  <link rel="alternate" type="application/rss+xml"
        title="Infinispan's RSS Feed"
        href="/feed.xml" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
          
  <!-- Global site tag (gtag.js) - Google Analytics -->
<!--   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-125236544-1');
  </script> -->


</head>

<body class="blog">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/infinispan-logo-white.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/learn/">学ぶ <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/introduction" class="">入門</a></li>
          <li><a href="/features" class="">機能</a></li>
          <li><a href="/documentation" class="">ドキュメンテーション</a></li>
          <li><a href="/tutorials" class="">チュートリアル</a></li>
          <li><a href="/videos" class="">ビデオ</a></li>
          <li><a href="/references" class="">参考資料</a></li>
          <li><a href="/experiments" class="">実験</a></li>
          <li><a href="/roadmap" class="">ロードマップ</a></li>
        </ul>
      </li>
      <li>
        <a href="/use-cases/" class="">使用事例</a>
      </li>
      <li>
        <a href="/community/" class="">コミュニティ</a>
      </li>
      <li>
        <a href="/blog/" class="active">Blog</a>
      </li>
      <li>
        <a href="/download/" class="">ダウンロード</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    
<div class="component-slim full-width-bg dark-bg light-blue">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <a href="/blog">Blogs</a>  <i class="fas fa-chevron-right"></i> Distributed Stream Quality of Life Improvements
    </div>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="grid__item width-10-12 width-12-12-m doc-content">
    <h1>Distributed Stream Quality of Life Improvements</h1>
    <div class="post-date">December 06, 2016
      Tags: <a href="/blog/tag/streams">streams</a> 
    </div>
    <div class="grid-wrapper">
      <div class="grid__item width-8-12 width-12-12-m margin-tb-sm">
        <div class="grid-wrapper">
          <div class="width-2-12 justify-self-center align-self-center">
            <img src="/assets/images/blog/authors/wburns.jpg">
          </div>
          <div class="width-10-12 align-self-center">
            <p class="byline">By William Burns</p>
          </div>
        </div>
      </div>
      <div class="grid__item width-12-12">
          <div class="paragraph">
<p>As I hope most people reading this already know, since Infinispan 8 you can
utilize the entire Java 8 Stream API and have it be distributed across your
cluster.  This performs the various intermediate and terminal operations on
the data local to the node it lives on, providing for extreme performance. 
There are some limitations and things to know as was explained at
<a href="http://blog.infinispan.org/2015/09/distributed-streams.html">distributed-streams</a>.</p>
</div>
<div class="paragraph">
<p>The problem with the API up to now was that, if you wanted to use lambdas,
it was quite an ugly scene.  Take for example the following code snippet:</p>
</div>
<div class="sect1">
<h2 id="8-0-distributed-streams-example">8.0 Distributed Streams Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>However, for Infinispan 9 we utilize a little syntax feature added with Java
8</p>
</div>
<div id="jls-15" class="paragraph oracle com/javase/specs/jls/se8/html/jls-15 html 12 2 5[1]">
<p>to add some much needed quality of life improvements.  This allows the most
specific interface to be chosen when a method is overloaded.  This allows
for a neat interaction when we add some new interfaces that implement
Serializable and the various function interfaces (SerializableFunction,
SerializablePredicate, SerializableSupplier, etc).  All of the Stream
methods have been overridden on the
<a href="https://docs.jboss.org/infinispan/9.0/apidocs/org/infinispan/CacheStream.html">CacheStream</a>
interface to take these arguments.</p>
</div>
<div class="paragraph">
<p>This allows for the code to be much cleaner as we can see here:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="9-0-distributed-streams-example">9.0 Distributed Streams Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Extra Methods</p>
</div>
<div class="paragraph">
<p>This is not the only benefit of providing the <strong>CacheStream</strong> interface: we
can also provide new methods that aren&#8217;t available on the standard
<a href="https://docs.oracle.com/javase/8/docs/api/?java/util/stream/Stream.html">Stream</a>
interface.  One example is the
<a href="https://docs.jboss.org/infinispan/9.0/apidocs/org/infinispan/CacheStream.html#forEach-org.infinispan.util.function.SerializableBiConsumer-">forEach</a>
method which allows the user to more easily provide a Cache that is injected
on each node as required.  This way you don&#8217;t have to use the clumsy
<a href="https://docs.jboss.org/infinispan/9.0/apidocs/org/infinispan/stream/CacheAware.html">CacheAware</a>
interface and can directly use lambdas as desired.</p>
</div>
<div class="paragraph">
<p>Here is an example of the new <strong>forEach</strong> method in action:</p>
</div>
<div class="paragraph">
<p>In this example we take a cache and, based on the keys in it, write those
values into another cache. Since <strong>forEach</strong> doesn&#8217;t have to be side effect
free, you can do whatever you want inside here.</p>
</div>
<div class="paragraph">
<p>All in all these improvements should make using Distributed Streams with
Infinispan much easier.  The extra methods could be extended further if
users have use cases they would love to suggest.  Just let us know, and I
hope you enjoy using Infinispan!</p>
</div>
</div>
</div>
          
      </div>
      <div class="grid__item width-12-12">
        <h2>手に入れて、使って、尋ねて！ </h2>
現在、新機能、改善、修正に取り組んでいますので、今後の発表にご期待ください。
<div class="paragraph">
    <p>最新のリリースを<a href="/download" target="_blank">ダウンロード</a>してお試しください。</p>
</div>
<div class="paragraph">
    <p>ソースコードは<a href="" target="_blank">GitHub</a>でホストされています。
        バグを報告したり、新機能を要求したりする必要がある場合は、<a href="https://issues.jboss.org/browse/ISPN" target="_blank">JIRA課題監視</a>で同様のものを探してください。
        見つからない場合は、<a href="https://issues.jboss.org/browse/ISPN" target="_blank">新しい課題を作成してください</a>。</p>
</div>
<div class="paragraph">
    <p>質問があったり、バグが発生していたり、Infinispanを使う上でのアドバイスが欲しい場合は、
        <a href="https://stackoverflow.com/questions/tagged/?tagnames=infinispan&sort=newest"
                       target="_blank">StackOverflow</a>をご利用ください。
        できる限り早く回答するように努めます。</p>
</div>
<div class="paragraph">
    <p>Infinispanのコミュニティでは、リアルタイムのコミュニケーションに<a href="https://zulipchat.com/"
                                        target="_blank">Zulip</a>を使用しています。
        Webブラウザまたは<a href="https://infinispan.zulipchat.com/" target="_blank">Infinispanチャット</a>上の
         <a href="https://infinispan.zulipchat.com/apps/" target="_blank">専用のアプリケーション</a>を使って参加してください。</p>
</div>
      </div>
      
      <div class="width-12-12 callout orange margin-tb-xs">
    <div class="grid-wrapper">
        <div class="width-4-12 width-12-12-m block-image">
            <img src="/assets/images/blog/authors/wburns.jpg" class="author-img">
        </div>
        <div class="width-8-12 width-12-12-m block-content">
            <h5>William Burns</h5>
            <p>Willは2013年からRed Hatで働いているInfinispanのコア・エンジニアです。趣味は、データのストリーミングとリアクティブなコードを書くこと。</p>
            <div class="width-3-12 width-6-12-m bio-block">
                <a href="http://github.com/wburns"><img src="/assets/images/community/icon-github.png"></a>
                
                <a href="https://twitter.com/mudokonman"><img src="/assets/images/community/icon-twitter.png"></a>
                
            </div>
        </div>
    </div>
</div>
      
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/infinispan-logo.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">InfinispanはApache 2.0オープンソースライセンスでリリースされています。<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>についての詳細はこちらをご覧ください。<br/><br/><a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>で構築されたこのウェブサイトは<a href='https://pages.github.com/' target='_blank'>Github Pages</a>でホストされており、完全にオープンソースです。より良いものにしたいのであれば、<a href='https://github.com/infinispan/infinispan.github.io' target='_blank'>このウェブサイトをフォーク</a>して、あなたが得たいものを私たちに見せてください。</p>

    
      <div class="width-1-12 project-links">
        <b>ナビゲーション</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/" >Home</a></li>
          
            
            <li><a href="/features" >機能</a></li>
          
            
            <li><a href="/documentation" >ドキュメント</a></li>
          
            
            <li><a href="/tutorials" >チュートリアル</a></li>
          
            
            <li><a href="/videos" >ビデオ</a></li>
          
            
            <li><a href="/use-cases" >使用例</a></li>
          
            
            <li><a href="/community" >コミュニティ</a></li>
          
            
            <li><a href="/download" >ダウンロード</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>貢献</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="https://issues.jboss.org/browse/ISPN" target="_blank">バグ登録</a></li>
          
            
            <li><a href="https://github.com/infinispan" target="_blank">コードを書く</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>私たちをフォロー</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/blog" >Blog</a></li>
          
            
            <li><a href="https://twitter.com/infinispan" target="_blank">Twitter</a></li>
          
        </ul>
      </div>
    

    <div class="width-6-12 more-links">
      <div class="grid-wrapper">
        <div class="width-6-12">
          <b>A Member of</b><br/>
          <a href="http://www.cloudtm.eu/" target="_blank"><img src="/assets/images/footer/cloud-tm.png"></a>
          <img src="/assets/images/footer/leads.png">
          <br/>
          <a href="http://cloudbutton.eu/" target="_blank"><img src="/assets/images/footer/cloud-button.png"></a>

        </div>
        <div class="width-6-12">

          <b>Thanks to</b><br/>
          <a href="https://www.jetbrains.com/idea/" target="_blank"><img src="/assets/images/footer/jetbrains.png" title="JetBrains Intellj IDEA"></a>
          <a href="https://weblate.org" target="_blank"><img src="/assets/images/footer/weblate.png" title="Weblate"></a>
        </div>
      </div>
    </div>
  </div>
</div>
  <div class="content-slim redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
      | <a href="https://www.redhat.com/en/about/privacy-policy">Red Hat Privacy Policy</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/truncate-list.js"></script>

  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>

<!--   <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script> -->
</body>

</html>
